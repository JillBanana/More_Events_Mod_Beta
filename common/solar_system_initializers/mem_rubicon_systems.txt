mem_rubicon_system = {
    name = Rubicon
    class = "sc_binary_10"
    usage = misc_system_init
    usage_odds = 20000
    max_instances = 1

    asteroid_belt = {
		type = mem_mixed_asteroid_belt
		radius = 145
    }

    planet = {
		count = 1
		class = star
		orbit_distance = 25
		orbit_angle = 1
		size = { min = 25 max = 30 }
        has_ring = no
        
        init_effect = {
            orbital_deposit_tile = {
                set_deposit = d_immense_energy_deposit
            }
            create_country = {
                name = Rubiconids
                type = faction
                effect = {
                    save_event_target_as = rubiconids
                }
            }
            create_fleet = {
                name = "Sky Tyrants"
                effect = {
                    set_owner = event_target:rubiconids
                    set_location = prev
                    set_formation_scale = 2.5
                    set_fleet_stance = aggressive 
                    set_aggro_range = 500 
                    set_aggro_range_measure_from = self
                    while = {
                        count = 3
                        create_ship = {
                            design = NAME_MEM_Rubicon_battleship
                        }
                    }
                    while = {
                        count = 8
                        create_ship = {
                            design = NAME_MEM_Rubicon_destroyer
                        }
                    }
                }
            }
        }
    }

    planet = {
        class = star
        orbit_distance = 0
        orbit_angle = 180
        size = { min = 20 max = 25 }
        has_ring = no

        init_effect = {
            create_fleet = {
                name = "Watchtower Central"
                effect = {
                    set_owner = event_target:rubiconids
                    set_location = prev
                    create_ship = {
                        design = NAME_MEM_Rubicon_fortress
                    }
                }
            }
        }
    }
    
    planet = {
        class = pc_molten
        orbit_distance = 40
        size = { min = 12 max = 15 }
    }

    planet = {
        class = pc_toxic
        orbit_distance = 30
        size = { min = 15 max = 22 }

        init_effect = {
            set_planet_flag = mem_rubicon_debris
            while = {
				count = 3
				create_ambient_object = {
					type = "medium_debris_01_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 50
						angle = random
					}
				}
			}
        }

        moon = {
            class = pc_barren
            orbit_distance = 8
            size = { min = 6 max = 9 }

            init_effect = {
                create_fleet = {
                    name = "Abaddon's Pursuers"
                    effect = {
                        set_owner = event_target:rubiconids
                        set_location = prev
                        set_formation_scale = 2.5
                        set_fleet_stance = aggressive 
                        set_aggro_range = 500 
                        set_aggro_range_measure_from = self
                        while = {
                            count = 3
                            create_ship = {
                                design = NAME_MEM_Rubicon_cruiser
                            }
                        }
                        while = {
                            count = 5
                            create_ship = {
                                design = NAME_MEM_Rubicon_destroyer
                            }
                        }
                        while = {
                            count = 10
                            create_ship = {
                                design = NAME_MEM_Rubicon_corvette
                            }
                        }
                    }
                }
            }
        }
    }

    planet = {
        class = rl_habitable_normal
        orbit_distance = 25
        size = 18

        moon = {
            class = pc_nuked
            orbit_distance = 8
            size = 12

            init_effect = {
                create_fleet = {
                    name = "Cerberus' Punishment"
                    effect = {
                        set_owner = event_target:rubiconids
                        set_location = prev
                        set_formation_scale = 2.5
                        set_fleet_stance = aggressive 
                        set_aggro_range = 500 
                        set_aggro_range_measure_from = self
                        while = {
                            count = 3
                            create_ship = {
                                design = NAME_MEM_Rubicon_cruiser
                            }
                        }
                        while = {
                            count = 5
                            create_ship = {
                                design = NAME_MEM_Rubicon_destroyer
                            }
                        }
                        while = {
                            count = 10
                            create_ship = {
                                design = NAME_MEM_Rubicon_corvette
                            }
                        }
                    }
                }
            }
        }

        init_effect = {
            set_planet_flag = mem_rubicon_debris
            while = {
				count = 5
				create_ambient_object = {
					type = "medium_debris_01_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 50
						angle = random
					}
				}
				create_ambient_object = {
					type = "medium_debris_02_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 50
						angle = random
					}
				}
			}
        }
    }

    change_orbit = 25

    planet = {
        count = 1
        class = pc_asteroid
        size = { min = 3 max = 7 }
        orbit_distance = 0
        orbit_angle = { min = 67 max = 77 }

        init_effect = {
            create_fleet = {
                name = "Circle One"
                effect = {
                    set_owner = event_target:rubiconids
                    set_location = prev
                    set_formation_scale = 2.5
                    set_fleet_stance = aggressive 
                    set_aggro_range = 500 
                    set_aggro_range_measure_from = self
                    while = {
                        count = 2
                        create_ship = {
                            design = NAME_MEM_Rubicon_destroyer
                        }
                    }
                    while = {
                        count = 7
                        create_ship = {
                            design = NAME_MEM_Rubicon_corvette
                        }
                    }
                }
            }
        }
    }

    planet = {
        count = 1
        class = pc_ice_asteroid
        size = { min = 3 max = 7 }
        orbit_distance = 0
        orbit_angle = { min = 67 max = 77 }

        init_effect = {
            create_fleet = {
                name = "Circle Two"
                effect = {
                    set_owner = event_target:rubiconids
                    set_location = prev
                    set_formation_scale = 2.5
                    set_fleet_stance = aggressive 
                    set_aggro_range = 500 
                    set_aggro_range_measure_from = self
                    while = {
                        count = 2
                        create_ship = {
                            design = NAME_MEM_Rubicon_destroyer
                        }
                    }
                    while = {
                        count = 7
                        create_ship = {
                            design = NAME_MEM_Rubicon_corvette
                        }
                    }
                }
            }
        }
    }

    planet = {
        class = pc_shattered
        orbit_distance = 0
        size = 25
        orbit_angle = { min = 67 max = 77 }

        init_effect = {
            set_planet_flag = mem_rubicon_debris
            create_fleet = {
                name = "Ground Zero"
                effect = {
                    set_owner = event_target:rubiconids
                    set_location = prev
                    create_ship = {
                        design = NAME_MEM_Rubicon_fortress
                    }
                }
            }
            while = {
				count = 5
				create_ambient_object = {
					type = "medium_debris_01_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 50
						angle = random
					}
				}
				create_ambient_object = {
					type = "medium_debris_02_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 50
						angle = random
					}
                }
                create_ambient_object = {
					type = "large_debris_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 50
						angle = random
					}
				}
			}
        }
    }

    planet = {
        count = 1
        class = pc_asteroid
        size = { min = 3 max = 7 }
        orbit_distance = 0
        orbit_angle = { min = 67 max = 77 }

        init_effect = {
            create_fleet = {
                name = "Circle Three"
                effect = {
                    set_owner = event_target:rubiconids
                    set_location = prev
                    set_formation_scale = 2.5
                    set_fleet_stance = aggressive 
                    set_aggro_range = 500 
                    set_aggro_range_measure_from = self
                    while = {
                        count = 2
                        create_ship = {
                            design = NAME_MEM_Rubicon_destroyer
                        }
                    }
                    while = {
                        count = 7
                        create_ship = {
                            design = NAME_MEM_Rubicon_corvette
                        }
                    }
                }
            }
        }
    }

    planet = {
        count = 1
        class = pc_ice_asteroid
        size = { min = 3 max = 7 }
        orbit_distance = 0
        orbit_angle = { min = 67 max = 77 }

        init_effect = {
            create_fleet = {
                name = "Circle Four"
                effect = {
                    set_owner = event_target:rubiconids
                    set_location = prev
                    set_formation_scale = 2.5
                    set_fleet_stance = aggressive 
                    set_aggro_range = 500 
                    set_aggro_range_measure_from = self
                    while = {
                        count = 2
                        create_ship = {
                            design = NAME_MEM_Rubicon_destroyer
                        }
                    }
                    while = {
                        count = 7
                        create_ship = {
                            design = NAME_MEM_Rubicon_corvette
                        }
                    }
                }
            }
        }
    }

    planet = {
        class = pc_nuked
        size = 20
        orbit_distance = 30

        moon = {
            class = pc_toxic
            orbit_distance = 8
            size = 10
        }

        moon = {
            class = pc_barren
            orbit_distance = 5
            size = 6
        }

        init_effect = {
            set_planet_flag = mem_rubicon_debris
            while = {
				count = 3
				create_ambient_object = {
					type = "medium_debris_01_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 50
						angle = random
					}
				}
				create_ambient_object = {
					type = "medium_debris_02_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 50
						angle = random
					}
                }
                create_ambient_object = {
					type = "large_debris_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 50
						angle = random
					}
				}
			}
        }
    }

    planet = {
        class = pc_gas_giant
        size = 30
        orbit_distance = 40

        change_orbit = 5

        moon = {
            count = 4
            class = random_non_colonizable
            orbit_distance = 5
        }

        init_effect = {
            create_fleet = {
                name = "Overseers of the Punishment"
                effect = {
                    set_owner = event_target:rubiconids
                    set_location = prev
                    set_formation_scale = 2.5
                    set_fleet_stance = aggressive 
                    set_aggro_range = 500 
                    set_aggro_range_measure_from = self
                    while = {
                        count = 8
                        create_ship = {
                            design = NAME_MEM_Rubicon_cruiser
                        }
                    }
                }
            }
        }
    }

    planet = {
        class = pc_barren_cold
        size = 25
        orbit_distance = 40

        moon = {
            class = pc_frozen
            size = 5
            orbit_distance = 5
        }
    }

    planet = {
        class = pc_gas_giant
        size = 20
        orbit_distance = 20

        moon = {
            class = pc_frozen
            size = 10
            orbit_distance = 10
        }
        init_effect = {
            create_fleet = {
                name = "Watchtower Deterrent"
                effect = {
                    set_owner = event_target:rubiconids
                    set_location = prev
                    create_ship = {
                        design = NAME_MEM_Rubicon_fortress
                    }
                }
            }
        }
    }

    planet = {
        class = pc_frozen
        size = 25
        orbit_distance = 20

        init_effect = {
            create_fleet = {
                name = "Hollowers"
                effect = {
                    set_owner = event_target:rubiconids
                    set_location = prev
                    set_formation_scale = 2.5
                    set_fleet_stance = aggressive 
                    set_aggro_range = 500 
                    set_aggro_range_measure_from = self
                    while = {
                        count = 15
                        create_ship = {
                            design = NAME_MEM_Rubicon_corvette
                        }
                    }
                }
            }
        }
    }

    init_effect = {
        while = {
            count = 3
            random_system_planet = {
                limit = { not = { has_planet_flag = mem_rubicon_debris } }
                set_planet_flag = mem_rubicon_debris
                create_ambient_object = {
					type = "large_debris_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 50
						angle = random
					}
				}
            }
        }
    }
}