# Gate system. Core of Sadrell cluster: this one also controls spawning chance for the entire classes - without it, there will be no systems
mem_sadrell_0_0 = {
    name = "SADRELL 0-0"
    class = sc_binary_1
    usage = misc_system_init
    flags = { mem_sadrell_gate_system mem_sadrell_home_cluster }
    usage_odds = {
        base = 50000
        modifier = {
	        factor = 0
	        has_star_flag = empire_cluster
        }
        modifier = {
			factor = 0
			is_fe_cluster = yes
		}
    }
    max_instances = 1
    asteroid_belt = {
        type = rocky_asteroid_belt
        radius = 100
    }

    change_orbit = 25

    planet = {
        class = star
        orbit_distance = 0
        orbit_angle = { min = 250 max = 290 }
        size = 25
    }

    planet = {
        class = star
        orbit_distance = 0
        orbit_angle = 180
        size = 16
    }

    planet = {
        class = pc_broken
        orbit_distance = 50
    }

    change_orbit = 25

    planet = {
        count = 4
        class = pc_asteroid
        orbit_distance = 0
    }

    change_orbit = 10

    planet = {
        count = 3
        class = random_non_colonizable
        orbit_distance = 25

        moon = {
            count = { min = 0 max = 1 }
            class = random_non_colonizable
            orbit_distance = 10
        }
    }

    init_effect = {
        set_global_flag = mem_sadrell_cluster_spawned
        every_neighbor_system = {
            limit = {
                NOR = {
                    has_star_flag = empire_cluster
                    is_fe_cluster = yes
                    has_star_flag = hostile_system
                }
            }
            set_star_flag = mem_sadrell_home_cluster
			every_neighbor_system = {
                limit = {
                    NOR = {
                        has_star_flag = empire_cluster
                        is_fe_cluster = yes
                        has_star_flag = hostile_system
                    }
                }
                set_star_flag = mem_sadrell_home_cluster
			}
        }
        every_system = { # This should discourage leviathans and the like from spawning in this cluster
            limit = { has_star_flag = mem_sadrell_home_cluster }
            set_star_flag = empire_cluster
        }
        spawn_megastructure = {
			type = mem_sadrell_gateway_inactive
			orbit_angle = 0
			orbit_distance = 60
			location = solar_system
        }
    }
}

# Sadrell capital system
mem_sadrell_0_1 = {
    name = "SADRELL 0-1"
    class = "rl_trinary_stars"
    flags = { mem_sadrell_homeworld_system mem_sadrell_home_cluster }
    usage = misc_system_init
    usage_odds = {
        base = 50000
        modifier = {
            factor = 0
            NOT = { has_star_flag = mem_sadrell_home_cluster }
        }
    }
    max_instances = 1

    change_orbit = 30

    planet = {
        count = 3
        class = star
    }

    change_orbit = 30

    planet = {
        count = 3
        class = random_non_colonizable
        orbit_distance = { min = 25 max = 30 }

        moon = {
            count = { min = 0 max = 1 }
            class = random_non_colonizable
            orbit_distance = 10
        }
    }

    planet = {
        class = pc_gas_giant
        orbit_distance = 35
        size = 25

        moon = {
            class = pc_broken
            orbit_distance = 10
        }

        moon = {
            class = pc_continental
            orbit_distance = 5
            size = 16

            flags = { mem_sadrell_homeworld }

            init_effect = {
                IF = {
                    limit = { host_has_dlc = "Humanoids Species Pack" }
                    create_species = {
                        name = Sadrell
                        adjective = Sadrellan
                        plural = Sadrells
                        class = "HUM"
                        portrait = "humanoid_hp_07"
                        name_list = "HUM4"
                        homeworld = this
                        traits = {
                            trait= "trait_thrifty"
                            trait= "trait_natural_engineers"
                            trait= "trait_slow_breeders"
                            trait = "trait_charismatic"
                            trait = "trait_weak"
                        }

                        effect = {
                            save_global_event_target_as = mem_sadrell_species
                        }
                    }
                }
                ELSE = {
                    create_species = {
                        name = Sadrell
                        adjective = Sadrellan
                        plural = Sadrells
                        class = "AVI"
                        portrait = "avi15"
                        homeworld = this
                        traits = {
                            trait= "trait_thrifty"
                            trait= "trait_natural_engineers"
                            trait= "trait_slow_breeders"
                            trait = "trait_charismatic"
                            trait = "trait_weak"
                        }

                        effect = {
                            save_global_event_target_as = mem_sadrell_species
                        }
                    }
                }
            }
        }

        moon = {
            count = 2
            class = pc_barren
            orbit_distance = 5
        }
    }

    planet = {
        count = 3
        class = random_non_colonizable
        orbit_distance = { min = 25 max = 30 }

        moon = {
            count = { min = 0 max = 1 }
            class = random_non_colonizable
            orbit_distance = 10
        }
    }

    init_effect = {
        
    }
}

# Industrial system
mem_sadrell_0_2 = {
    name = "SADRELL 0-2"
    class = rl_dwarf_stars
    flags = { mem_sadrell_industrial_system mem_sadrell_home_cluster }
    usage = misc_system_init
    usage_odds = {
        base = 50000
        modifier = {
            factor = 0
            NOT = { has_star_flag = mem_sadrell_home_cluster }
        }
    }
    max_instances = 1

    asteroid_belt = {
        type = rocky_asteroid_belt
        radius = 100
    }
    asteroid_belt = {
        type = icy_asteroid_belt
        radius = 200
    }
    asteroid_belt = {
        type = rocky_asteroid_belt
        radius = 275
    }

    planet = {
        class = star
        orbit_distance = 0
    }

    change_orbit = 25

    planet = {
        count = 2
        class = random_non_colonizable
        orbit_distance = 25
    }

    change_orbit = 25

    planet = {
        count = { min = 2 max = 4 }
        class = pc_asteroid
        orbit_distance = 0
    }

    planet = {
        class = pc_arid
        size = { min = 14 max = 20 }
        orbit_distance = 25
        flags = { mem_sadrell_industrial }
    }

    planet = {
        count = 2
        class = random_non_colonizable
        orbit_distance = 25
    }

    change_orbit = 25

    planet = {
        count = { min = 2 max = 4 }
        class = pc_ice_asteroid
        orbit_distance = 0
    }

    planet = {
        count = 2
        class = random_non_colonizable
        orbit_distance = 25
    }

    change_orbit = 25

    planet = {
        count = { min = 2 max = 4 }
        class = pc_asteroid
        orbit_distance = 0
    }
}

# Agricultural system
mem_sadrell_0_3 = {
    name = "SADRELL 0-3"
    class = sc_a
    flags = { mem_sadrell_agri_system mem_sadrell_home_cluster }
    usage = misc_system_init
    usage_odds = {
        base = 50000
        modifier = {
            factor = 0
            NOT = { has_star_flag = mem_sadrell_home_cluster }
        }
    }
    max_instances = 1

    asteroid_belt = {
        type = icy_asteroid_belt
        radius = 180
    }

    planet = {
        class = star
        orbit_distance = 0
    }

    change_orbit = 50

    planet = {
        class = random_non_colonizable
        orbit_distance = 20
    }

    planet = {
        class = pc_tropical
        orbit_distance = 20
        size = { min = 14 max = 20 }
        flags = { mem_sadrell_agri_world }

        moon = {
            class = random_non_colonizable
            orbit_distance = 10
        }
    }

    planet = {
        count = 2
        class = random_non_colonizable
        orbit_distance = 30

        moon = {
            class = random_non_colonizable
            orbit_distance = 10
        }
    }

    change_orbit = 30

    planet = {
        count = { min = 2 max = 4 }
        class = pc_ice_asteroid
        orbit_distance = 0
    }

    planet = {
        count = 3
        class = random_non_colonizable
        orbit_distance = 30

        moon = {
            class = random_non_colonizable
            orbit_distance = 10
        }
    }
}

# Science colony
mem_sadrell_0_4 = {
    name = "SADRELL 0-4"
    class = sc_binary_10
    flags = { mem_sadrell_science_system mem_sadrell_home_cluster }
    usage = misc_system_init
    usage_odds = {
        base = 50000
        modifier = {
            factor = 0
            NOT = { has_star_flag = mem_sadrell_home_cluster }
        }
    }
    max_instances = 1

    change_orbit = 20

    planet = {
        count = 2
        class = star
        orbit_distance = 0
        orbit_angle = 180
    }

    change_orbit = 25

    planet = {
        count = 3
        class = random_non_colonizable
        orbit_distance = 25

        moon = {
            count = { min = 0 max = 1 }
            class = random_non_colonizable
            orbit_distance = 10
        }
    }

    planet = {
        class = pc_ocean
        orbit_distance = 25
        size = { min = 16 max = 24 }
        flags = { mem_sadrell_science_system_1 }
    }

    planet = {
        class = pc_gas_giant
        orbit_distance = 35
        size = 25

        moon = {
            class = pc_alpine
            orbit_distance = 10
            size = { min = 12 max = 16 }
            flags = { mem_sadrell_science_system_2 }
        }
    }

    planet = {
        count = 3
        class = random_non_colonizable
        orbit_distance = 35

        change_orbit = 5

        moon = {
            count = { min = 0 max = 2 }
            class = random_non_colonizable
            orbit_distance = 5
        }
    }
}