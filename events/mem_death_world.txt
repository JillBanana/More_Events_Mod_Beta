namespace = mem_death_world

@tier1materialreward = 6
@tier1materialmin = 100
@tier1materialmax = 500
@tier2materialreward = 12
@tier2materialmin = 150
@tier2materialmax = 1000
@tier3materialreward = 18
@tier3materialmin = 250
@tier3materialmax = 1500
@tier4materialreward = 24
@tier4materialmin = 350
@tier4materialmax = 2000

@tier1influencereward = 6
@tier1influencemin = 40
@tier1influencemax = 100
@tier2influencereward = 12
@tier2influencemin = 80
@tier2influencemax = 175
@tier3influencereward = 18
@tier3influencemin = 125
@tier3influencemax = 250
@tier4influencereward = 24
@tier4influencemin = 150
@tier4influencemax = 300

@tier1researchreward = 6
@tier1researchmin = 60
@tier1researchmax = 150
@tier2researchreward = 12
@tier2researchmin = 90
@tier2researchmax = 250
@tier3researchreward = 18
@tier3researchmin = 120
@tier3researchmax = 350
@tier4researchreward = 24
@tier4researchmin = 150
@tier4researchmax = 500

###########################################
#Death World
#Writing and code by ViolentBeetle
###########################################

#Phase 1: Dangerous Awakening
planet_event = {
	id = mem_death_world.1
	title = mem_death_world.1.name
	desc = mem_death_world.1.desc
	picture = GFX_evt_alien_nature
	show_sound = event_alien_nature
	location = ROOT
	
	mean_time_to_happen = {
		months = 1
	}
	
	trigger = {
		is_planet_class = pc_gaia
		has_owner = yes
		NOR = {
			has_global_flag = mem_death_world_started
			has_planet_flag = colony_event
			has_planet_flag = was_terraformed
		}
		owner = {
			is_ai = no
		}
		num_pops > 3
	}
	
	immediate = {
		set_global_flag = mem_death_world_started
		set_planet_flag = colony_event
		set_planet_flag = mem_death_world_planet
		set_planet_flag = mem_paradise_blocked
		add_modifier = {
			modifier = mem_death_world_1
			days = -1
		}
		IF = {
			limit = { has_modifier = mem_paradise_world }
			remove_modifier = mem_paradise_world
		}
	}
	
	option = {
		name = WORRYING
	}
}

#Ransacked storage
planet_event = {
	id = mem_death_world.2
	title = mem_death_world.2.name
	desc = mem_death_world.2.desc
	picture = GFX_evt_alien_nature
	show_sound = event_alien_nature
	location = ROOT
	
	mean_time_to_happen = {
		months = 6
	}
	
	trigger = {
		has_planet_flag = mem_death_world_planet
		NOR = {
			has_planet_flag = mem_death_world_finished
			has_planet_flag = mem_death_world_happening
		}
	}
	
	immediate = {
		
		set_timed_planet_flag = {
			flag = mem_death_world_happening
			days = 240
		}
		add_modifier = {
			modifier = mem_death_world_ransacked
			days = 120
		}
	}
	
	option = {
		name = UNFORTUNATE
		
		
	}
}

#Civilian injuries
planet_event = {
	id = mem_death_world.3
	title = mem_death_world.3.name
	desc = mem_death_world.3.desc
	picture = GFX_evt_alien_nature
	show_sound = event_alien_nature
	location = ROOT
	
	mean_time_to_happen = {
		months = 6
	}
	
	trigger = {
		has_planet_flag = mem_death_world_planet
		NOR = {
			has_planet_flag = mem_death_world_finished
			has_planet_flag = mem_death_world_happening
		}
	}
	
	immediate = {

		set_timed_planet_flag = {
			flag = mem_death_world_happening
			days = 240
		}
		add_modifier = {
			modifier = mem_death_world_stinged
			days = 120
		}
	}
	
	option = {
		name = mem_death_world.3a
		
		
	}
}

#Plague of insects
planet_event = {
	id = mem_death_world.4
	title = mem_death_world.4.name
	desc = mem_death_world.4.desc
	picture = GFX_evt_alien_nature
	show_sound = event_alien_nature
	location = ROOT
	
	mean_time_to_happen = {
		months = 6
	}
	
	trigger = {
		has_planet_flag = mem_death_world_planet
		NOR = {
			has_planet_flag = mem_death_world_finished
			has_planet_flag = mem_death_world_happening
		}
	}
	
	immediate = {
		set_timed_planet_flag = {
			flag = mem_death_world_happening
			days = 240
		}
		add_modifier = {
			modifier = mem_death_world_insects
			days = 120
		}
	}
	
	option = {
		name = mem_death_world.4a
		
		
	}
}

#Phase 2: Wildlife agression grows
planet_event = {
	id = mem_death_world.5
	title = mem_death_world.5.name
	desc = mem_death_world.5.desc
	picture = GFX_evt_alien_nature
	show_sound = event_alien_nature
	location = ROOT
	
	mean_time_to_happen = {
		months = 12
	}
	
	trigger = {
		has_planet_flag = mem_death_world_planet
		NOR = {
			has_planet_flag = mem_death_world_advanced
			has_planet_flag = mem_death_world_finished
		}
	}
	
	immediate = {
		set_planet_flag = mem_death_world_advanced
		remove_modifier = mem_death_world_1
		add_modifier = {
			modifier = mem_death_world_2
			days = -1
		}
	}
	
	option = {
		name = mem_death_world.5a
	}
}

#Militia
planet_event = {
	id = mem_death_world.6
	title = mem_death_world.6.name
	desc = mem_death_world.6.desc
	picture = GFX_evt_ground_combat
	#show_sound = 
	location = ROOT
	
	mean_time_to_happen = {
		months = 6
	}
	
	trigger = {
		has_planet_flag = mem_death_world_advanced
		NOR = {
			has_planet_flag = mem_death_world_finished
			has_planet_flag = mem_death_world_happening
			has_planet_flag = mem_death_world_militia
		}
	}
	
	immediate = {
		set_timed_planet_flag = {
			flag = mem_death_world_happening
			days = 240
		}
		set_planet_flag = mem_death_world_militia
		#Please be another way. Please!
		every_owned_pop = {
			pop_change_ethic = "ethic_militarist"
		}
		
	}
	
	option = {
		name = mem_death_world.6a
		
		trigger = {
			owner = {
				minerals > 249
			}
		}
		
		add_modifier = {
			modifier = mem_death_world_militia_supported
			days = -1
		}
	}
	
	option = {
	
		name = mem_death_world.6b
	
		add_modifier = {
			modifier = mem_death_world_militia
			days = -1
		}
	}
	
	option = {
		name = mem_death_world.6c
		
		add_modifier = {
			modifier = mem_death_world_militia_rejected
			days = 360
		}
	}
}

#Death swarm
planet_event = {
	id = mem_death_world.7
	title = mem_death_world.7.name
	desc = mem_death_world.7.desc
	picture = GFX_evt_alien_nature
	show_sound = event_alien_nature
	location = ROOT
	
	mean_time_to_happen = {
		months = 6
	}
	
	trigger = {
		has_planet_flag = mem_death_world_advanced
		NOR = {
			has_planet_flag = mem_death_world_finished
			has_planet_flag = mem_death_world_happening
		}
	}
	
	immediate = {
		set_timed_planet_flag = {
			flag = mem_death_world_happening
			days = 240
		}
		random_pop = {
			kill_pop = yes
		}
		add_modifier = {
			modifier = mem_death_world_death_swarm
			days = 180
		}
	}
	
	
	option = {
		name = TERRIBLE
	}
}

#Stampede
planet_event = {
	id = mem_death_world.8
	title = mem_death_world.8.name
	desc = mem_death_world.8.desc
	picture = GFX_evt_alien_nature
	show_sound = event_alien_nature
	location = ROOT
	
	mean_time_to_happen = {
		months = 6
	}
	
	trigger = {
		has_planet_flag = mem_death_world_advanced
		NOR = {
			has_planet_flag = mem_death_world_finished
			has_planet_flag = mem_death_world_happening
		}
	}
	
	immediate = {
		set_timed_planet_flag = {
			flag = mem_death_world_happening
			days = 240
		}
		random_tile = {
			limit = {
				has_building = yes
				is_ruined = no
			}
			set_ruined = yes
		}
		add_modifier = {
			modifier = mem_death_world_stampede
			days = 120
		}
	}
	
	option = {
		name = mem_death_world.8a
	}
}

#Phase 3: Nature's revenge
planet_event = {
	id = mem_death_world.9
	title = mem_death_world.9.name
	desc = mem_death_world.9.desc
	picture = GFX_evt_alien_nature
	show_sound = event_alien_nature
	location = ROOT
	
	mean_time_to_happen = {
		months = 12
	}
	
	trigger = {
		has_planet_flag = mem_death_world_advanced
		NOT = {
			has_planet_flag = mem_death_world_ultimate
			has_planet_flag = mem_death_world_finished
		}
	}
	
	immediate = {
		set_planet_flag = mem_death_world_ultimate
		remove_modifier = mem_death_world_2
		add_modifier = {
			modifier = mem_death_world_3
			days = -1
		}
	}
	
	option = {
		name = mem_death_world.9a
	}
}

#Purity movement
planet_event = {
	id = mem_death_world.10
	title = mem_death_world.10.name
	desc = mem_death_world.10.desc
	picture = GFX_evt_smugglers_in_bar
	show_sound = event_alien_nature
	location = ROOT
	
	mean_time_to_happen = {
		months = 12
	}
	
	trigger = {
		has_planet_flag = mem_death_world_ultimate
		NOR = {
			has_planet_flag = mem_death_world_finished
			has_planet_flag = mem_death_world_happening
			has_planet_flag = mem_death_world_purity
		}
	}
	
	immediate = {
		every_owned_pop = {
			pop_change_ethic = "ethic_xenophobe"
		}
		set_planet_flag = mem_death_world_purity
		set_timed_planet_flag = {
			flag = mem_death_world_happening
			days = 240
		}
	}
	
	option = {
		name = mem_death_world.10a
		
		trigger = {
			owner = {
				NOR = {
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
				}
			}
		}
	}
	
	option = {
		name = mem_death_world.10b
		
		trigger = {
			owner = {
				OR = {
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
				}
			}
		}
	}
}

#Looking for a solution
planet_event = {
	id = mem_death_world.11
	title = mem_death_world.11.name
	desc = mem_death_world.11.desc
	picture = GFX_evt_alien_nature
	show_sound = event_alien_nature
	location = ROOT
	
	mean_time_to_happen = {
		months = 36
	}
	
	trigger = {
		has_planet_flag = mem_death_world_advanced
		NOT = {
			has_planet_flag = mem_death_world_looking
		}
	}
	
	immediate = {
		set_planet_flag = mem_death_world_looking
	}
	
	option = {
		name = mem_death_world.11a
		
		trigger = {
			owner = {
				NOR = {
					has_ethic = ethic_fanatic_xenophile
					has_ethic = ethic_fanatic_pacifist
				}
			}
		}
		
		begin_event_chain = {
			event_chain = mem_death_world_chain
		}
		
		enable_special_project = {
			name = MEM_DEATH_WORLD_WAR_ON_NATURE
			owner = root
			location = this
		}
	}
	
	#Option for study
	#Option for walled garden
	#Option for psionic
	#Option for hive mind
}

#War on nature: Choosing the path

planet_event = {
	id = mem_death_world.12
	title = mem_death_world.12.name
	desc = mem_death_world.12.desc
	picture = GFX_evt_alien_nature
	show_sound = event_alien_nature
	location = ROOT

	is_triggered_only = yes
	
	option = {
		name = mem_death_world.12a
		
		enable_special_project = {
			name = MEM_DEATH_WORLD_WILDLIFE_REMOVAL
			owner = root
			location = this
		}
		
		enable_special_project = {
			name = MEM_DEATH_WORLD_EXTERMINATION_OR_BUST
			owner = root
			location = this
		}
	}
}

#War on nature: Wildlife removal

planet_event = {
	id = mem_death_world.13
	title = mem_death_world.13.name
	desc = mem_death_world.13.desc
	picture = GFX_evt_nuclear_explosion
	show_sound = event_alien_nature
	location = ROOT
	
	is_triggered_only = yes
	
	immediate = {
		set_planet_flag = mem_death_world_finished
		change_pc = pc_nuked
	}
	
	option = {
		name = mem_death_world.13a
		
		owner = {
			add_society_research = 1000
		}
		add_modifier = {
			modifier = mem_death_world_wasteland
			days = -1
		}
		
		IF = {
			limit = {
				has_modifier = mem_death_world_2
			}
			remove_modifier = mem_death_world_2
		}
		
		IF = {
			limit = {
				has_modifier = mem_death_world_3
			}
			remove_modifier = mem_death_world_3
		}
	}
}

#Extermination or bust

planet_event = {
	id = mem_death_world.14
	title = mem_death_world.14.name
	desc = mem_death_world.14.desc
	picture = GFX_evt_ground_combat
	show_sound = event_alien_nature
	location = ROOT
	
	is_triggered_only = yes
	
	immediate = {
		set_planet_flag = mem_death_world_fight
		create_country = {
			name = "Death world animalia"
			type = faction
		}
		last_created_country = {
			set_country_flag = mem_death_world_monsters
		}
		create_army = {
			name = "Alpha torrasque"
			owner = last_created
			type = "mem_alpha_torrasque_army"
		}
		create_army = {
			name = "Torrasque"
			owner = last_created
			type = "mem_torrasque_army"
		}
		create_army = {
			name = "Torrasque"
			owner = last_created
			type = "mem_torrasque_army"
		}
		create_army = {
			name = "Hunter-killer pack"
			owner = last_created
			type = "mem_hunter_killer_army"
		}
		create_army = {
			name = "Hunter-killer pack"
			owner = last_created
			type = "mem_hunter_killer_army"
		}
		create_army = {
			name = "Hunter-killer pack"
			owner = last_created
			type = "mem_hunter_killer_army"
		}
		create_army = {
			name = "Hunter-killer pack"
			owner = last_created
			type = "mem_hunter_killer_army"
		}
		create_army = {
			name = "Hunter-killer pack"
			owner = last_created
			type = "mem_hunter_killer_army"
		}
	}
	
	option = {
		name = mem_death_world.14a
	}
	
}

#We won! FROMFROM = planet

country_event = {
	id = mem_death_world.15
	title = mem_death_world.15.name
	desc = mem_death_world.15.desc
	picture = GFX_evt_ground_combat
	show_sound = event_alien_nature
	location = ROOT
	
	is_triggered_only = yes
	
	trigger = {
		FROMFROM = {
			has_planet_flag = mem_death_world_fight
			NOT = { has_planet_flag = mem_death_world_finished }
		}
		FROM = {
			has_country_flag = mem_death_world_monsters
		}
	}
	
	immediate = {
		FROMFROM = {
			set_planet_flag = mem_death_world_finished
		}
	}
	
	option = {
		name = mem_death_world.15a
		
		
		add_society_research = 500
		
		FROMFROM = {
			add_modifier = {
				modifier = mem_death_world_graveyard
				days = -1
			}
			
			remove_planet_flag = mem_paradise_blocked
			
			IF = {
				limit = {
					has_modifier = mem_death_world_2
				}
				remove_modifier = mem_death_world_2
			}
			
			IF = {
				limit = {
					has_modifier = mem_death_world_3
				}
				remove_modifier = mem_death_world_3
			}
		}
	}
}

# We lost!

country_event = {
	id = mem_death_world.16
	title = mem_death_world.16.name
	desc = mem_death_world.16.desc
	picture = GFX_evt_ground_combat
	show_sound = event_alien_nature
	location = ROOT
	
	is_triggered_only = yes
	
	trigger = {
		FROMFROM = {
			has_planet_flag = mem_death_world_fight
			NOT = { has_planet_flag = mem_death_world_finished }
		}
		FROM = {
			has_country_flag = mem_death_world_monsters
		}
	}
	
	immediate = {
		FROMFROM = {
			remove_modifier = mem_death_world_2
			remove_modifier = mem_death_world_3
			set_planet_flag = mem_death_world_finished
			change_pc = pc_toxic
			add_modifier = {
				modifier = mem_death_world_toxic
				days = -1
			}
			orbital_deposit_tile = {
				clear_deposits = yes
				add_deposit = d_enormous2_society_deposit
			}
		}
	}
	
	option = {
		name = mem_death_world_LOST
	}
}