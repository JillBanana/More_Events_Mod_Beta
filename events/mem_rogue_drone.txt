namespace = mem_rogue_drone

@tier1materialreward = 6
@tier1materialmin = 100
@tier1materialmax = 500
@tier2materialreward = 12
@tier2materialmin = 150
@tier2materialmax = 1000
@tier3materialreward = 18
@tier3materialmin = 250
@tier3materialmax = 1500
@tier4materialreward = 24
@tier4materialmin = 350
@tier4materialmax = 2000

@tier1influencereward = 6
@tier1influencemin = 40
@tier1influencemax = 100
@tier2influencereward = 12
@tier2influencemin = 80
@tier2influencemax = 175
@tier3influencereward = 18
@tier3influencemin = 125
@tier3influencemax = 250
@tier4influencereward = 24
@tier4influencemin = 150
@tier4influencemax = 300

@tier1researchreward = 6
@tier1researchmin = 60
@tier1researchmax = 150
@tier2researchreward = 12
@tier2researchmin = 90
@tier2researchmax = 250
@tier3researchreward = 18
@tier3researchmin = 120
@tier3researchmax = 350
@tier4researchreward = 24
@tier4researchmin = 150
@tier4researchmax = 500

#Rogue Drone
#Idea and writing by Maria and CriticalDawn
#Code by ViolentBeetle

#Drone escape setting up
country_event = {
	id = mem_rogue_drone.1
	
	hide_window = yes
	
	mean_time_to_happen = {
		days = 30
	}
	
	trigger = {
		is_ai = yes
		#has_ethic = ethic_hive_mind
		#num_owned_planets > 1
		any_neighbor_country = {
			NOT = { has_ethic = ethic_hive_mind }
			is_ai = no
		}
		NOT = { has_global_flag = mem_rogue_drone }
	}
	
	immediate = {
		set_global_flag = mem_rogue_drone
		save_event_target_as = origin
		random_owned_planet = {
			# limit = {
				# is_capital = no
			# }
			save_event_target_as = hiveplanet
		}
		random_neighbor_country = {
			limit = {
				is_ai = no
				NOT = { has_ethic = ethic_hive_mind }
			}
			save_event_target_as = receiver
			country_event = {
				id = mem_rogue_drone.2
			}
		}
	}
}

#Drone receiver
country_event = {
	id = mem_rogue_drone.2
	title = mem_rogue_drone.2.name
	desc = mem_rogue_drone.2.desc
	
	picture = GFX_evt_ship_in_orbit
	
	is_triggered_only = yes
	
	option = {
		name = mem_rogue_drone.2a
		
		country_event = {
			id = mem_rogue_drone.3
			days = 14
		}
	}
	
	option = {
		name = mem_rogue_drone.2b
		
		trigger = {
			NOT = { has_ethic = ethic_fanatic_xenophile }
		}
		
		country_event = {
			id = mem_rogue_drone.5
		}
	}
	
	option = {
		name = mem_rogue_drone.2b.phile
		
		trigger = {
			has_ethic = ethic_fanatic_xenophile 
		}
		
		country_event = {
			id = mem_rogue_drone.5
		}
	}
	
	option = {
		name = mem_rogue_drone.2c
		
		trigger = {
			has_ethic = ethic_fanatic_xenophobe
		}
		
		event_target:origin = {
			add_opinion_modifier = {
				who = ROOT
				modifier = mem_rogue_drone_busted
			}
		}
	}
}

#Handover
country_event = {
	id = mem_rogue_drone.3
	title = mem_rogue_drone.3.name
	desc = mem_rogue_drone.desc
	
	is_triggered_only = yes
	
	picture = GFX_evt_throne_room
	
	option = {
		name = OK
		
		add_monthly_resource_mult = {
			resource = society_research
			value = @tier3researchreward
			min = @tier3researchmin
			max = @tier3researchmax
		}
		
		event_target:origin = {
			add_opinion_modifier = {
				who = ROOT
				modifier = mem_rogue_drone_handover
			}
		}
	}
}

#Creating drone for chat
country_event = {
	id = mem_rogue_drone.4
	
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		create_leader = {
			species = event_target:origin.owner_species
			name = "Drone 7/9"
			skill = 500
			traits = {
				add_trait = leader_trait_expertise_industry
				add_trait = mem_rogue_drone_trait
			}
		}
		last_created_leader = {
			exile_leader_as = drone
		}
		country_event = {
			id = mem_rogue_drone.5
		}
	}
}

#Chat with drone
country_event = {
	id = mem_rogue_drone.5
	title = TRANSMISSION
	desc = mem_rogue_drone.5.desc
	
	diplomatic = yes
	
	is_triggered_only = yes
	
	picture_event_data = {
		portrait = event_target:drone
		planet_background = event_target:origin
		graphical_culture = event_target:origin
		city_level = event_target:origin
		room = event_target:origin
	}
	
	option = {
		name = mem_rogue_drone.5a
		response_text = mem_rogue_drone.5a.response
		is_dialog_only = yes
		
		set_country_flag = mem_rogue_drone_who
	}
	
	option = {
		name = mem_rogue_drone.5b
		response_text = mem_rogue_drone.5b.response
		is_dialog_only = yes
		
		trigger = {
			has_country_flag = mem_rogue_drone_who
		}
	}
	
	option = {
		name = mem_rogue_drone.5c
		response_text = mem_rogue_drone.5c.response
		
		trigger = {
			has_country_flag = mem_rogue_drone_who
		}
		
		set_country_flag = mem_rogue_drone_offer_made
	}
	
	option = {
		name = mem_rogue_drone.5d
		
		trigger = {
			has_country_flag = mem_rogue_drone_offer_made
		}
		
		country_event = {
			id = mem_rogue_drone.6
			days = 14
		}
	}
	
}

country_event = {
	id = mem_rogue_drone.6
	title = mem_rogue_drone.6.name
	desc = mem_rogue_drone.6.desc
	picture = GFX_evt_throne_room
	
	is_triggered_only = yes
	
	option = {
		name = mem_rogue_drone.6a.phile
		
		trigger = {
			has_ethic = ethic_fanatic_xenophile
		}
		
		event_target:origin = {
			add_opinion_modifier = {
				who = ROOT
				modifier = mem_rogue_drone_refused
			}
		}
	}
	
	option = {
		name = mem_rogue_drone.6a
		
		trigger = {
			NOT = { has_ethic = ethic_fanatic_xenophile }
		}
		
		event_target:origin = {
			add_opinion_modifier = {
				who = ROOT
				modifier = mem_rogue_drone_refused
			}
		}
	}
	
	option = {
		name = mem_rogue_drone.6b.ethic
		
		trigger = {
			OR = {
				has_ethic = ethic_fanatic_xenophobe
				has_ethic = ethic_xenophobe
			}
			OR = {
				has_ethic = ethic_fanatic_pacifist
				has_ethic = ethic_pacifist
			}
		}
		
		country_event = {
			id = mem_rogue_drone.3
			days = 14
		}
	}
	
	option = {
		name = mem_rogue_drone.6b
		
		trigger = {
			NAND = {
				OR = {
					has_ethic = ethic_fanatic_xenophobe
					has_ethic = ethic_xenophobe
				}
				OR = {
					has_ethic = ethic_fanatic_pacifist
					has_ethic = ethic_pacifist
				}
			}
		}
		
		country_event = {
			id = mem_rogue_drone.3
			days = 14
		}
	}
	
	option = {
		name = mem_rogue_drone.6c
		
		country_event = {
			id = mem_rogue_drone.7
			days = 14
		}
	}
}

#Drone study
country_event = {
	id = mem_rogue_drone.7
	title = mem_rogue_drone.7.name
	desc = mem_rogue_drone.7.desc
	
	picture = GFX_evt_society_research
	
	is_triggered_only = yes
	
	option = {
		name = OK
		
		add_monthly_resource_mult = {
			resource = society_research
			value = @tier4researchreward
			min = @tier4researchmin
			max = @tier4researchmax
		}
	}
}