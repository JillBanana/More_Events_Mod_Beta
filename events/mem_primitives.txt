namespace = mem_primitives

@MTTHCOMMON = 1
@MTTHMEDIUM = 1
@MTTHRARE = 1

@warbase = 30
@warrandom = 30
@interbellum = 30
@interbellumrandom = 30

@deathcycle = 30

@tier1researchreward = 6
@tier1researchmin = 60
@tier1researchmax = 150
@tier2researchreward = 12
@tier2researchmin = 90
@tier2researchmax = 250
@tier3researchreward = 18
@tier3researchmin = 120
@tier3researchmax = 350
@tier4researchreward = 24
@tier4researchmin = 150
@tier4researchmax = 500

#####################################
# Simple primitive events
# By ViolentBeetle unless otherwise specified
#####################################



##############
#Moon landing#
##############


country_event = {
	id = mem_primitives.100
	hide_window = yes
	
	mean_time_to_happen = {
		months = @MTTHCOMMON
		modifier = {
			factor = 0.50
			has_ethic = ethic_materialist
		}
		modifier = {
			factor = 0.10
			has_ethic = ethic_fanatic_materialist
		}
	}
	
	trigger = {
		is_country_type = primitive
		#has_country_flag = early_space_age
		NOT = { has_country_flag = mem_primitives_moon }
		NOT = { has_ethic = ethic_hive_mind }
		
		home_planet = {
			has_observation_outpost = yes
			observation_outpost_owner = {
				NOT = { has_country_flag = mem_primitives_moon_o }
			}
			has_moon = yes
			NOT = {
				any_moon = { has_owner = yes }
			}
			solar_system = {
				NOT = { has_star_flag = sol }
			}
		}
	}
	
	immediate = {
		set_country_flag = mem_primitives_moon
		random_list = {
			80 = { }
			15 = { shift_ethic = ethic_materialist }
			5 = { shift_ethic = ethic_militarist }
		}
		capital_scope = {
			random_moon = {
				save_event_target_as = the_moon
			}
			save_event_target_as = the_planet
			observation_outpost_owner = {
				set_country_flag = mem_primitives_moon_o
				
				country_event = {
					id = mem_primitives.101
				}
			}
		}
	}
}

#One small step: Notification
country_event = {
	id = mem_primitives.101
	title = mem_primitives.101.name
	desc = mem_primitives.101.desc
	
	picture = GFX_evt_satellite_in_orbit
	
	is_triggered_only = yes
	
	option = {
		name = mem_primitives.101a
		
		trigger = {
			NOR = {
				has_ethic = ethic_materialist
				has_ethic = ethic_fanatic_materialist
				has_ethic = ethic_xenophobe
				has_ethic = ethic_fanatic_xenophobe
			}
		}
	}
	
	option = {
		name = mem_primitives.101a.phobe
		
		trigger = {
			OR = {
				has_ethic = ethic_xenophobe
				has_ethic = ethic_fanatic_xenophobe
			}
		}
	}
	
	option = {
		name = mem_primitives.101a.mat
		
		trigger = {
			OR = {
				has_ethic = ethic_materialist
				has_ethic = ethic_fanatic_materialist
			}
			NOR = {
				has_ethic = ethic_xenophile
				has_ethic = ethic_fanatic_xenophile
				has_ethic = ethic_xenophobe
				has_ethic = ethic_fanatic_xenophobe
			}
		}
	}
	
	option = {
		name = mem_primitives.101a.matphile
		
		trigger = {
			OR = {
				has_ethic = ethic_materialist
				has_ethic = ethic_fanatic_materialist
			}
			OR = {
				has_ethic = ethic_xenophile
				has_ethic = ethic_fanatic_xenophile
			}
		}
		
		add_monthly_resource_mult = {
			resource = unity
			value = @tier1researchreward
			min = @tier1researchmin
			max = @tier1researchmax 
		}
	}
	
	after = {
		add_monthly_resource_mult = {
			resource = society_research
			value = @tier1researchreward
			min = @tier1researchmin
			max = @tier1researchmax 
		}
	}
}

#Solar flares - Regression is hard
# country_event = {
	# id = mem_primitives.200
	# hide_window = yes
	
	# mean_time_to_happen = {
		# months = @MTTHRARE
	# }
	
	# trigger = {
		# is_country_type = primitive
		# OR = {
			# has_country_flag = industrial_age
			# has_country_flag = machine_age
			# has_country_flag = atomic_age
			# has_country_flag = early_space_age
		# }
		# NOT = { has_country_flag = mem_primitives_flare }
		# NOT = { has_ethic = ethic_hive_mind }
		
		# home_planet = {
			# has_observation_outpost = yes
			# observation_outpost_owner = {
				# NOT = { has_country_flag = mem_primitives_flare_o }
			# }
			# solar_system = {
				# NOT = { has_star_flag = sol }
			# }
		# }
	# }
	
	# immediate = {
		# set_country_flag = mem_primitives_flare
		# capital_scope = {
			# solar_system = {
				# save_event_target_as = the_star
			# }
			# save_event_target_as = the_planet
			# observation_outpost_owner = {
				# set_country_flag = mem_primitives_flare_o
				# country_event = {
					# id = mem_primitives.201
				# }
			# }
		# }
		# random_list = {
			# 50 = { country_event = { mem_primitives.202 } } 
			# 50 = { country_event = { mem_primitives.204 } } 
		# }
	# }
	
	
# }


#####################
# World war scenario#
#####################


country_event = {
	id = mem_primitives.300
	hide_window = yes
	
	mean_time_to_happen = {
		months = @MTTHMEDIUM
		modifier = {
			factor = 0.50
			has_ethic = ethic_militarist
		}
		modifier = {
			factor = 0.10
			has_ethic = ethic_fanatic_militarist
		}
		modifier = {
			factor = 10
			has_ethic = ethic_pacifist
		}
	}
	
	trigger = {
		is_country_type = primitive
		# OR = {
			# has_country_flag = steam_age
			# has_country_flag = industrial_age
			# has_country_flag = machine_age
		# }
		NOT = { has_country_flag = mem_primitives_ww }
		NOT = { has_ethic = ethic_hive_mind }
		NOT = { has_ethic = ethic_fanatic_pacifist }
		
		home_planet = {
			has_observation_outpost = yes
			observation_outpost_owner = {
				NOT = { has_country_flag = mem_primitives_ww_o }
			}
			solar_system = {
				NOT = { has_star_flag = sol }
			}
		}
	}
	
	immediate = {
		set_country_flag = mem_primitives_ww
		random_list = {
			30 = { }
			30 = { shift_ethic = ethic_xenophobe }
			40 = { shift_ethic = ethic_militarist }
		}
		random_list = {
			80 = { country_event = { id = mem_primitives.302 days = @warbase random = @warrandom } } #Armistice for 20 years
			20 = { country_event = { id = mem_primitives.304 days = @warbase random = @warrandom } } #To end all wars
		}
		capital_scope = {
			save_event_target_as = the_planet
			observation_outpost_owner = {
				set_country_flag = mem_primitives_ww_o
				
				country_event = {
					id = mem_primitives.301
				}
			}
		}
	}
}

#Notification
country_event = {
	id = mem_primitives.301
	title = mem_primitives.301.name
	desc = mem_primitives.301.desc
	
	picture = GFX_evt_burning_settlement
	
	is_triggered_only = yes
	
	option = {
		name = OK
	}
}

#Versalles
country_event = {
	id = mem_primitives.302
	
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		is_country_type = primitive
	}
	
	immediate = {
		random_list = {
			66 = { country_event = { id = mem_primitives.306 days = @interbellum random = @interbellumrandom } } #World War II
			33 = {  } #World War II will not happen
		}
		
		capital_scope = {
			save_event_target_as = the_planet
			observation_outpost_owner = {
				country_event = {
					id = mem_primitives.303
				}
			}
		}
	}
}

#Notification
country_event = {
	id = mem_primitives.303
	title = mem_primitives.303.name
	desc = mem_primitives.303.desc
	
	picture = GFX_evt_burning_settlement
	
	is_triggered_only = yes
	
	option = {
		name = mem_primitives.303a
	}
	
	after = {
		add_monthly_resource_mult = {
			resource = society_research
			value = @tier1researchreward
			min = @tier1researchmin
			max = @tier1researchmax 
		}
	}
}

#To end all wars
country_event = {
	id = mem_primitives.304
	
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		is_country_type = primitive
	}
	
	immediate = {
		random_list = {
			66 = { shift_ethic = ethic_pacifist }
			33 = { shift_ethic = ethic_xenophile } 
		}
		
		random_list = {
			33 = { shift_ethic = ethic_pacifist }
			17 = { shift_ethic = ethic_xenophile } 
			50 = {  }
		}
		
		capital_scope = {
			save_event_target_as = the_planet
			observation_outpost_owner = {
				country_event = {
					id = mem_primitives.305
				}
			}
		}
	}
}

#Notification
country_event = {
	id = mem_primitives.305
	title = mem_primitives.305.name
	desc = mem_primitives.305.desc
	
	picture = GFX_evt_burning_settlement
	
	is_triggered_only = yes
	
	option = {
		name = OK
	}
	
	after = {
		add_monthly_resource_mult = {
			resource = society_research
			value = @tier1researchreward
			min = @tier1researchmin
			max = @tier1researchmax 
		}
	}
}

#World War II
country_event = {
	id = mem_primitives.306
	
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		is_country_type = primitive
	}
	
	immediate = {
		random_list = {
			20 = { shift_ethic = ethic_militarist }
			5 = { shift_ethic = ethic_authoritarian } 
			5 = { shift_ethic = ethic_xenophobe }
			70 = {  }
		}
		
		random_list = {
			66 = { country_event = { id = mem_primitives.308 days = @warbase random = @warrandom } } #Allies wins
			33 = { country_event = { id = mem_primitives.310 days = @warbase random = @warrandom } } #Axis win
		}
		
		
		capital_scope = {
			save_event_target_as = the_planet
			observation_outpost_owner = {
				country_event = {
					id = mem_primitives.307
				}
			}
		}
	}
}

#Notification
country_event = {
	id = mem_primitives.307
	title = mem_primitives.307.name
	desc = mem_primitives.307.desc
	
	picture = GFX_evt_burning_settlement
	
	is_triggered_only = yes
	
	option = {
		name = mem_primitives.307a
	}
}

#World War II: Allies won
country_event = {
	id = mem_primitives.308
	
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		is_country_type = primitive
	}
	
	immediate = {
		random_list = {
			55 = {  }
			30 = { shift_ethic = ethic_egalitarian }
			15 = { shift_ethic = ethic_pacifist }
		}
		
		
		capital_scope = {
			save_event_target_as = the_planet
			observation_outpost_owner = {
				country_event = {
					id = mem_primitives.309
				}
			}
		}
	}
}

#Notification
country_event = {
	id = mem_primitives.309
	title = mem_primitives.309.name
	desc = mem_primitives.309.desc
	
	picture = GFX_evt_burning_settlement
	
	is_triggered_only = yes
	
	option = {
		name = OK
	}
	
	after = {
		add_monthly_resource_mult = {
			resource = society_research
			value = @tier1researchreward
			min = @tier1researchmin
			max = @tier1researchmax 
		}
	}
}

#World War II: Axis won
country_event = {
	id = mem_primitives.310
	
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		is_country_type = primitive
	}
	
	immediate = {
		country_remove_ethic = "ethic_fanatic_materialist"
		country_remove_ethic = "ethic_materialist"
		country_remove_ethic = "ethic_fanatic_egalitarian"
		country_remove_ethic = "ethic_egalitarian"
		country_remove_ethic = "ethic_fanatic_pacifist"
		country_remove_ethic = "ethic_pacifist"

		country_remove_ethic = "ethic_militarist"
		country_remove_ethic = "ethic_fanatic_xenophile"
		country_remove_ethic = "ethic_xenophile"

		country_remove_ethic = "ethic_xenophobe"
		country_remove_ethic = "ethic_fanatic_spiritualist"
		country_remove_ethic = "ethic_spiritualist"

		country_remove_ethic = "ethic_authoritarian"
		
		IF = {
			limit = {
				NOR = {
					has_ethic = ethic_fanatic_authoritarian
					has_ethic = ethic_fanatic_militarist
					has_ethic = ethic_fanatic_xenophobe
				}
			}
			country_add_ethic = "ethic_xenophobe"
			country_add_ethic = "ethic_authoritarian"
			country_add_ethic = "ethic_militarist"
			
			else = {
				IF = {
					limit = {
						has_ethic = ethic_fanatic_authoritarian
					}
					country_add_ethic = ethic_xenophobe
				}
				IF = {
					limit = {
						has_ethic = ethic_fanatic_militarist
					}
					country_add_ethic = ethic_xenophobe
				}
				IF = {
					limit = {
						has_ethic = ethic_fanatic_xenophobe
					}
					country_add_ethic = ethic_militarist
				}
			}
		}
	
		capital_scope = {
			save_event_target_as = the_planet
			observation_outpost_owner = {
				country_event = {
					id = mem_primitives.311
				}
			}
		}
	}
}

#Notification
country_event = {
	id = mem_primitives.311
	title = mem_primitives.311.name
	desc = mem_primitives.311.desc
	
	picture = GFX_evt_burning_settlement
	
	is_triggered_only = yes
	
	option = {
		name = INTERESTING
	}
	
	after = {
		add_monthly_resource_mult = {
			resource = society_research
			value = @tier1researchreward
			min = @tier1researchmin
			max = @tier1researchmax 
		}
	}
}


##########
#Religion#
##########

#Peaceful one
country_event = {
	id = mem_primitives.400
	hide_window = yes
	
	mean_time_to_happen = {
		months = @MTTHMEDIUM
		modifier = {
			factor = 5
			has_ethic = ethic_materialist
		}
		modifier = {
			factor = 10
			has_ethic = ethic_fanatic_materialist
		}
		modifier = {
			factor = 0.5
			has_ethic = ethic_spiritualist
		}
	}
	
	trigger = {
		is_country_type = primitive
		# OR = {
			# has_country_flag = bronze_age
			# has_country_flag = iron_age
			# has_country_flag = late_medieval_age
		# }
		NOT = { has_country_flag = mem_primitives_religion }
		NOT = { has_ethic = ethic_hive_mind }
		NOT = { has_ethic = ethic_fanatic_spiritualist }
		
		home_planet = {
			has_observation_outpost = yes
			observation_outpost_owner = {
				NOT = { has_country_flag = mem_primitives_religion_o }
			}
			solar_system = {
				NOT = { has_star_flag = sol }
			}
		}
	}
	
	immediate = {
		set_country_flag = mem_primitives_religion
		shift_ethic = ethic_spiritualist
		random_list = {
			70 = { }
			15 = { shift_ethic = ethic_xenophile }
			15 = { shift_ethic = ethic_pacifist }
		}
		capital_scope = {
			save_event_target_as = the_planet
			observation_outpost_owner = {
				set_country_flag = mem_primitives_religion_o
				
				country_event = {
					id = mem_primitives.401
				}
			}
		}
	}
}

#Notification
country_event = {
	id = mem_primitives.401
	title = mem_primitives.401.name
	desc = mem_primitives.401.desc
	
	picture = GFX_evt_medieval_alien_civilization
	
	is_triggered_only = yes
	
	option = {
		name = OK
	}
	
	after = {
		add_monthly_resource_mult = {
			resource = society_research
			value = @tier1researchreward
			min = @tier1researchmin
			max = @tier1researchmax 
		}
	}
}

#Violent one
country_event = {
	id = mem_primitives.402
	hide_window = yes
	
	mean_time_to_happen = {
		months = @MTTHMEDIUM
		modifier = {
			factor = 5
			has_ethic = ethic_materialist
		}
		modifier = {
			factor = 10
			has_ethic = ethic_fanatic_materialist
		}
		modifier = {
			factor = 0.5
			has_ethic = ethic_spiritualist
		}
	}
	
	trigger = {
		is_country_type = primitive
		# OR = {
			# has_country_flag = bronze_age
			# has_country_flag = iron_age
			# has_country_flag = late_medieval_age
		# }
		NOT = { has_country_flag = mem_primitives_religion }
		NOT = { has_ethic = ethic_hive_mind }
		NOT = { has_ethic = ethic_fanatic_spiritualist }
		
		home_planet = {
			has_observation_outpost = yes
			observation_outpost_owner = {
				NOT = { has_country_flag = mem_primitives_religion_o }
			}
			solar_system = {
				NOT = { has_star_flag = sol }
			}
		}
	}
	
	immediate = {
		set_country_flag = mem_primitives_religion
		shift_ethic = ethic_spiritualist
		random_list = {
			70 = { }
			15 = { shift_ethic = ethic_xenophobe }
			15 = { shift_ethic = ethic_militarist }
		}
		capital_scope = {
			save_event_target_as = the_planet
			observation_outpost_owner = {
				set_country_flag = mem_primitives_religion_o
				
				country_event = {
					id = mem_primitives.403
				}
			}
		}
	}
}

#Notification
country_event = {
	id = mem_primitives.403
	title = mem_primitives.403.name
	desc = mem_primitives.403.desc
	
	picture = GFX_evt_medieval_alien_civilization
	
	is_triggered_only = yes
	
	option = {
		name = OK
	}
	
	after = {
		add_monthly_resource_mult = {
			resource = society_research
			value = @tier1researchreward
			min = @tier1researchmin
			max = @tier1researchmax 
		}
	}
}

#Philosophical one
country_event = {
	id = mem_primitives.404
	hide_window = yes
	
	mean_time_to_happen = {
		months = @MTTHMEDIUM
		modifier = {
			factor = 5
			has_ethic = ethic_materialist
		}
		modifier = {
			factor = 10
			has_ethic = ethic_fanatic_materialist
		}
		modifier = {
			factor = 0.5
			has_ethic = ethic_spiritualist
		}
	}
	
	trigger = {
		is_country_type = primitive
		# OR = {
			# has_country_flag = bronze_age
			# has_country_flag = iron_age
			# has_country_flag = late_medieval_age
		# }
		NOT = { has_country_flag = mem_primitives_religion }
		NOT = { has_ethic = ethic_hive_mind }
		NOT = { has_ethic = ethic_fanatic_spiritualist }
		
		home_planet = {
			has_observation_outpost = yes
			observation_outpost_owner = {
				NOT = { has_country_flag = mem_primitives_religion_o }
			}
			solar_system = {
				NOT = { has_star_flag = sol }
			}
		}
	}
	
	immediate = {
		set_country_flag = mem_primitives_religion
		shift_ethic = ethic_spiritualist
		random_list = {
			85 = { }
			15 = { shift_ethic = ethic_pacifist }
		}
		capital_scope = {
			save_event_target_as = the_planet
			observation_outpost_owner = {
				set_country_flag = mem_primitives_religion_o
				
				country_event = {
					id = mem_primitives.405
				}
			}
		}
	}
}

#Notification
country_event = {
	id = mem_primitives.405
	title = mem_primitives.405.name
	desc = mem_primitives.405.desc
	
	picture = GFX_evt_medieval_alien_civilization
	
	is_triggered_only = yes
	
	option = {
		name = OK
	}
	
	after = {
		add_monthly_resource_mult = {
			resource = society_research
			value = @tier1researchreward
			min = @tier1researchmin
			max = @tier1researchmax 
		}
	}
}

#Wacky one, with aliens
country_event = {
	id = mem_primitives.406
	hide_window = yes
	
	mean_time_to_happen = {
		months = @MTTHMEDIUM
		modifier = {
			factor = 5
			has_ethic = ethic_materialist
		}
		modifier = {
			factor = 10
			has_ethic = ethic_fanatic_materialist
		}
		modifier = {
			factor = 0.5
			has_ethic = ethic_spiritualist
		}
	}
	
	trigger = {
		is_country_type = primitive
		# OR = {
			# has_country_flag = machine_age
			# has_country_flag = atomic_age
			# has_country_flag = early_space_age
		# }
		NOT = { has_country_flag = mem_primitives_religion }
		NOT = { has_ethic = ethic_hive_mind }
		NOT = { has_ethic = ethic_fanatic_spiritualist }
		
		home_planet = {
			has_observation_outpost = yes
			observation_outpost_owner = {
				NOT = { has_country_flag = mem_primitives_religion_o }
			}
			solar_system = {
				NOT = { has_star_flag = sol }
			}
		}
	}
	
	immediate = {
		set_country_flag = mem_primitives_religion
		random_list = {
			85 = { }
			15 = { shift_ethic = ethic_spiritualist }
		}
		capital_scope = {
			save_event_target_as = the_planet
			observation_outpost_owner = {
				set_country_flag = mem_primitives_religion_o
				
				country_event = {
					id = mem_primitives.407
				}
			}
		}
	}
}

#Notification
country_event = {
	id = mem_primitives.407
	title = mem_primitives.407.name
	desc = mem_primitives.407.desc
	
	picture = GFX_evt_metropolis
	
	is_triggered_only = yes
	
	option = {
		name = mem_primitives.407a
	}
	
	after = {
		add_monthly_resource_mult = {
			resource = society_research
			value = @tier1researchreward
			min = @tier1researchmin
			max = @tier1researchmax 
		}
	}
}

#################
#Global pandemic#
#################

#Black death
country_event = {
	id = mem_primitives.500
	hide_window = yes
	
	mean_time_to_happen = {
		months = @MTTHMEDIUM
	}
	
	trigger = {
		is_country_type = primitive
		# OR = {
			# has_country_flag = iron_age
			# has_country_flag = late_medieval_age
			# has_country_flag = steam_age
		# }
		NOT = { has_country_flag = mem_primitives_pandemic }
		NOT = { has_ethic = ethic_hive_mind }
		
		home_planet = {
			has_observation_outpost = yes
			observation_outpost_owner = {
				NOT = { has_country_flag = mem_primitives_pandemic_o }
			}
			solar_system = {
				NOT = { has_star_flag = sol }
			}
		}
	}
	
	immediate = {
		set_country_flag = mem_primitives_pandemic
		country_event = {
			id = mem_primitives.502
		}
		capital_scope = {
			save_event_target_as = the_planet
			observation_outpost_owner = {
				set_country_flag = mem_primitives_pandemic_o
				
				country_event = {
					id = mem_primitives.501
				}
			}
		}
	}
}